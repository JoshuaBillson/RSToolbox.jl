<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Principal Component Analysis · RemoteSensingToolbox.jl</title><meta name="title" content="Principal Component Analysis · RemoteSensingToolbox.jl"/><meta property="og:title" content="Principal Component Analysis · RemoteSensingToolbox.jl"/><meta property="twitter:title" content="Principal Component Analysis · RemoteSensingToolbox.jl"/><meta name="description" content="Documentation for RemoteSensingToolbox.jl."/><meta property="og:description" content="Documentation for RemoteSensingToolbox.jl."/><meta property="twitter:description" content="Documentation for RemoteSensingToolbox.jl."/><meta property="og:url" content="https://JoshuaBillson.github.io/RemoteSensingToolbox.jl/pca_example/"/><meta property="twitter:url" content="https://JoshuaBillson.github.io/RemoteSensingToolbox.jl/pca_example/"/><link rel="canonical" href="https://JoshuaBillson.github.io/RemoteSensingToolbox.jl/pca_example/"/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">RemoteSensingToolbox.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../quickstart/">Quick Start</a></li><li class="is-active"><a class="tocitem" href>Principal Component Analysis</a></li><li><a class="tocitem" href="../spectral_example/">Spectral Analysis</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Examples</a></li><li class="is-active"><a href>Principal Component Analysis</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Principal Component Analysis</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/JoshuaBillson/RemoteSensingToolbox.jl/blob/main/docs/src/pca_example.md#" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Principal-Component-Analysis"><a class="docs-heading-anchor" href="#Principal-Component-Analysis">Principal Component Analysis</a><a id="Principal-Component-Analysis-1"></a><a class="docs-heading-anchor-permalink" href="#Principal-Component-Analysis" title="Permalink"></a></h1><p>Remotely sensed imagery typically consists of anywhere from five to several hundred spectral bands. These bands are often highly correlated because they occupy similar spectral regions. </p><p>PCA is used in remote sensing to:</p><ul><li>Create a smaller dataset from multiple bands, while retaining as much of the original spectral information as possible. The new image will consist of several uncorrelated PC bands.</li><li>Reveal complex relationships among spectral features.</li><li>Determine which characteristics are prevalent in most of the bands, and those that are specific to only a few.</li></ul><p>Our first step is to load and visualize our initial image.</p><pre><code class="language-julia hljs">using RemoteSensingToolbox, Rasters
using Pipe: @pipe

sentinel = read_bands(Sentinel2, &quot;data/T11UPT_20200804T183919/R60m/&quot;)
roi = @view sentinel[Rasters.X(900:1799), Rasters.Y(1:900)]
visualize(roi, TrueColor{Sentinel2}; upper=0.99)</code></pre><p><img src="../figures/original.png" alt/></p><p>Next, we&#39;ll fit a PCA transformation to our image. The reason that we make fitting and transformation seperate is so that the procedure can be repeated and reversed. We&#39;ll try keeping all of the components at first so we can get a sense of how many we&#39;ll need to retain. </p><pre><code class="language-julia hljs">pca = fit_pca(sentinel, method=:cov)</code></pre><pre><code class="nohighlight hljs">PCA(dimensions=11) 

Projection Matrix:
11×11 Matrix{Float32}:
 -0.026   -0.2068  -0.359    0.312   -0.0955  -0.4791   0.2245  -0.6117   0.1862  -0.1494   0.1005
 -0.0361  -0.2354  -0.3739   0.1417  -0.0495  -0.1544   0.3841   0.3908  -0.3467   0.2438  -0.5265
 -0.0775  -0.2406  -0.3554  -0.1492   0.0607   0.0575   0.0611   0.2326  -0.4335  -0.2812   0.6751
 -0.0396  -0.3231  -0.321   -0.0301  -0.048    0.4006   0.1103   0.1691   0.6681   0.3318   0.1738
 -0.1194  -0.2914  -0.2233  -0.3824   0.3987   0.3538  -0.1552  -0.388   -0.0944  -0.2647  -0.4087
 -0.3925   0.0354  -0.0791  -0.5717   0.1024  -0.5641  -0.2124   0.0649   0.1101   0.3449   0.0496
 -0.4949   0.1513  -0.0179  -0.1062  -0.4124   0.0178   0.1554   0.231    0.257   -0.6108  -0.1833
 -0.5257   0.084   -0.0977   0.6026   0.4321   0.0232  -0.3684   0.1418   0.0193   0.0173   0.0145
 -0.155   -0.549    0.63     0.0248   0.3084  -0.1466   0.361    0.095    0.0889  -0.0983   0.0592
 -0.0695  -0.5511   0.1381   0.1059  -0.5562   0.0011  -0.5628  -0.0342  -0.1565   0.0709  -0.0666
 -0.5216   0.1354   0.1415  -0.0111  -0.2273   0.3423   0.3317  -0.3898  -0.3017   0.39     0.1247

Importance of Components:
  Cumulative Variance: 0.76  0.9679  0.989  0.9938  0.9968  0.9984  0.9991  0.9995  0.9998  ...  1.0
  Explained Variance: 0.76  0.2078  0.0212  0.0047  0.0031  0.0016  0.0007  0.0004  0.0002  ...  0.0001</code></pre><p>If we look at the cumulative variance, we see that we only need to retain the first three principal components to account for 98.9% of the variance in our data. Knowing this, we&#39;ll perform a forward rotation with <code>forward_pca</code>, specifying that we want to keep only the first three components.</p><pre><code class="language-julia hljs">transformed = forward_pca(pca, roi, 3)
r, g, b = [view(transformed, Rasters.Band(i)) for i in 1:3]
visualize(r, g, b; upper=0.99)</code></pre><p><img src="../figures/pca.png" alt/></p><p>Each band in the transformed image corresponds to a linear combination of multiple bands from the original image. Thus, the bands no longer relate to wavelengths of light, but instead capture different features from the underlying spectral signatures. In the above visualization, we can see that water is highlighted in yellow, vegetation is green, and built-up land produces hues of bright red. </p><p>We may also wish to reverse the transformation in order to recover an approximation of the original image. We can do this with the <code>inverse_pca</code> method, which will return a <code>RasterStack</code> with the same layers as the original image, assuming that it was itself a <code>RasterStack</code>. This makes the recovered image compatible with methods that dispatch on <code>AbstractBandset</code> types, such as <code>visualize</code>.</p><pre><code class="language-julia hljs">recovered = inverse_pca(pca, transformed)
visualize(recovered, TrueColor{Sentinel2}; upper=0.99)</code></pre><p><img src="../figures/recovered.png" alt/></p><p>We can see that the color of the recovered image is indeed similar, but not identical to that of the original. Had we elected to retain all 11 components, we would find the two to be identical (minus some floating point error).</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../quickstart/">« Quick Start</a><a class="docs-footer-nextpage" href="../spectral_example/">Spectral Analysis »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="auto">Automatic (OS)</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.2.1 on <span class="colophon-date" title="Tuesday 26 December 2023 10:56">Tuesday 26 December 2023</span>. Using Julia version 1.9.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>

<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Spectral Analysis · RemoteSensingToolbox.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link rel="canonical" href="https://JoshuaBillson.github.io/RemoteSensingToolbox.jl/spectral_example/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">RemoteSensingToolbox.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../visualization_example/">Visualization</a></li><li><a class="tocitem" href="../preprocessing_example/">Preprocessing</a></li><li class="is-active"><a class="tocitem" href>Spectral Analysis</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Examples</a></li><li class="is-active"><a href>Spectral Analysis</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Spectral Analysis</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/JoshuaBillson/RemoteSensingToolbox.jl/blob/main/docs/src/spectral_example.md#" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Spectral-Analysis-Example"><a class="docs-heading-anchor" href="#Spectral-Analysis-Example">Spectral Analysis Example</a><a id="Spectral-Analysis-Example-1"></a><a class="docs-heading-anchor-permalink" href="#Spectral-Analysis-Example" title="Permalink"></a></h1><p>A common application of remotely sensed imagery is land cover classification. One method to accomplish this is to analyze the spectral signatures produced by different types of cover. <code>RemoteSensingToolbox</code> provides a number of functions for extracting and visualyzing spectral signatures organized by their associated lan cover.</p><p>The first step in our analysis is to load our remotely sensed data and convert the DNs (Digital Numbers) to reflectances. Reflectance is a standardized unit of measurement defined over the interval [0, 1] which denotes the fraction of light that is reflected by the observed surface. A reflectance of 0.0 indicates that no light was reflected whereas a reflectance of 1.0 indicates that 100% of light was reflected.</p><pre><code class="language-julia hljs">using RemoteSensingToolbox, DataFrames, Shapefile, CairoMakie

landsat = Landsat8(&quot;data/LC08_L2SP_043024_20200802_20200914_02_T1/&quot;) |&gt; dn_to_reflectance</code></pre><p>Next, we need to load a shapefile which defines some regions containing each type of land cover that we&#39;re interested in.</p><pre><code class="language-julia hljs">shp = Shapefile.Table(&quot;data/landcover/landcover.shp&quot;) |&gt; DataFrame</code></pre><p>Examining the shapefile gives us some idea of how its contents are structured. As we can see, the regions of interest are stored as <code>Polygon</code> objects under the <code>:geometry</code> column, while the land cover types are under <code>:MC_name</code> and <code>:C_name</code>. The <code>:MC_name</code> column defines the macroclass, which in our case are built up land, vegetation, bare earth, and water. The <code>:C_name</code> column defines the specific class to which some land cover belongs. For example, both &quot;Trees&quot; and &quot;Vegetation&quot; belong to the &quot;Vegetation&quot; macroclass.</p><pre><code class="nohighlight hljs">8×7 DataFrame
 Row │ geometry            fid      MC_ID  MC_name     C_ID   C_name      SCP_UID                   
     │ Polygon             Missing  Int64  String      Int64  String      String                    
─────┼──────────────────────────────────────────────────────────────────────────────────────────────
   1 │ Polygon(38 Points)  missing      1  Built Up        1  Built Up    20230527_122212594060_314
   2 │ Polygon(31 Points)  missing      1  Built Up        2  Road        20230527_122301732906_304
   3 │ Polygon(7 Points)   missing      2  Vegetation      3  Vegetation  20230527_122832068862_302
   4 │ Polygon(57 Points)  missing      2  Vegetation      4  Trees       20230527_123221462871_572
   5 │ Polygon(5 Points)   missing      3  Bare Earth      5  Hail Scar   20230527_123631491671_937
   6 │ Polygon(7 Points)   missing      3  Bare Earth      6  Bare Earth  20230527_123727873290_779
   7 │ Polygon(7 Points)   missing      4  Water           7  Lake        20230527_123931189139_867
   8 │ Polygon(5 Points)   missing      3  Bare Earth      6  Bare Earth  20230527_125120033074_286</code></pre><p>To visualize the spectral signatures of each type of land cover, we can call <code>plot_signatures</code> on the raster from which we want to extract the signatures, the shapefile defining the regions of interest, and the column which specifies the class of each polygon. We should note that <code>plot_signatures</code> also expects a <code>BandSet</code> defining the sensor&#39;s bands and corresponding central wavelength. However, this information is determined implicitly for <code>AbstractSensor</code> types.</p><pre><code class="language-julia hljs">plot_signatures(landsat, shp, :C_name)</code></pre><p><img src="../figures/landsat_sigs_wong.png" alt/></p><p>We see that we&#39;ve plotted the signatures for each land cover type in <code>shp</code>. However, we may wish to override the default colors. Fortunately, <code>plot_signatures</code> accepts an optional argument allowing us to specify any colors that we wish.</p><pre><code class="language-julia hljs">plot_signatures(landsat, shp, :C_name; colors=cgrad(:tab10))</code></pre><p><img src="../figures/landsat_sigs_tab10.png" alt/></p><p>The <code>plot_signatures!</code> method is nearly identical to <code>plot_signatures</code>, but it expects a <code>Makie.Axis</code> object as its first argument onto which the signatures will be drawn (hence the exclamation). This allows us to create more complicated plots than are supported by <code>plot_signatures</code>. We will demonstrate this capability by plotting the same signatures for three different sensors, each of which passed over our study area within a period of four days. For this reason, we can compare the signatures with a single shapefile, as we do not expect the land cover types to change significantly within this span of time.</p><pre><code class="language-julia hljs"># Load Sentinel and DESIS
sentinel = Sentinel2A(&quot;data/T11UPT_20200804T183919/&quot;) |&gt; dn_to_reflectance
desis = DESIS(&quot;data/DESIS-HSI-L2A-DT0483531728_001-20200804T234520-V0210/SPECTRAL_IMAGE.tif&quot;) |&gt; dn_to_reflectance
sensors = [landsat, sentinel, desis]

# Create Figure
fig = Figure(resolution=(1000, 800))

# Create Axes
ax1 = Axis(fig[1,1], xticksvisible=false, xticklabelsvisible=false)
ax2 = Axis(fig[2,1], ylabel=&quot;Reflectance&quot;, ylabelfont=:bold, xticksvisible=false, xticklabelsvisible=false)
ax3 = Axis(fig[3,1], xlabel=&quot;Wavelength (nm)&quot;, xlabelfont=:bold)
axs = [ax1, ax2, ax3]

# Plot Signatures
colors = cgrad([:orange, :green, :saddlebrown, :navy], 4, categorical=true)
for (sensor, ax) in zip(sensors, axs)
   plot_signatures!(ax, sensor, shp, :MC_name; colors=colors)
   xlims!(ax, 400, 1000)
end

# Add Legend
Legend(fig[1:3,2], first(axs), &quot;Classification&quot;)</code></pre><p><img src="../figures/multisensor_sigs.png" alt/></p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../preprocessing_example/">« Preprocessing</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.24 on <span class="colophon-date" title="Friday 9 June 2023 21:46">Friday 9 June 2023</span>. Using Julia version 1.9.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
